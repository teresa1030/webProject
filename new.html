<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="new.css">
    <title>新增商品</title>
</head>
<body>
    <div class="wrap">
    <div class="header">
            <div class="logo">
                    <a href="manage.html"><img id="navLogo" width="122" height="48" 
                        src="https://s1.lativ.com.tw/images/logo-2011.png?18472" alt="lativ米格國際"></a>
            </div>
            <div class="function">
                <ul>
                    <li class="home"><a  href="home.html">商品首頁</a></li>
                    <li class="home"><a  href="manage.html">管理商品</a></li>
                    <li><a href="new.html">新增商品</a></li>
                </ul>
            </div>
            <div class="clear"></div>
        </div>
        <div class="content">
            <div class="addProduct">
            <table>
                <tr><td width=200>商品名稱</td><td width=600><input type="text" name="title" class="title" ></td></tr>
                <tr><td width=200>商品圖片</td><td width=600><input type="url" name="img" class="img" ></td></tr>
                <tr><td width=200>商品尺寸</td><td width=600><input type="checkbox" name="size" class="size"value="S">S
                    <input type="checkbox" name="size" class="size"value="M">M
                    <input type="checkbox" name="size" class="size"value="L">L
                    <input type="checkbox" name="size" class="size"value="XL">XL
                    <input type="checkbox" name="size" class="size"value="XXL">XXL</td></tr>
                <tr><td width=200>商品價格</td><td width=600><input type="text" name="price" class="price" ></td></tr>
                <tr><td width=200>更多圖片</td><td width=600><input type="url" name="picture1" class="picture1" ></td></tr>
                <tr><td width=200>更多圖片</td><td width=600><input type="url" name="picture2" class="picture2" ></td></tr>
                <tr><td width=200>更多圖片</td><td width=600><input type="url" name="picture3" class="picture3" ></td></tr>
                <tr><td width=200>更多圖片</td><td width=600><input type="url" name="picture4" class="picture4" ></td></tr>

                </table>
                    <input type="submit" class="send" value="新增" onclick="add()">
                    <div class="clear"></div>
    </div>
                
                
            
            
        </div>
        <div class="footer"></div>
    </div>
   
    <script>
        function add(){
        
        var title = document.querySelector('.title').value;
        var img = document.querySelector('.img').value;
        var size = document.getElementsByName('size');
        var price = document.querySelector('.price').value;
        var picture1 = document.querySelector('.picture1').value;
        var picture2 = document.querySelector('.picture2').value;
        var picture3 = document.querySelector('.picture3').value;
        var picture4 = document.querySelector('.picture4').value;
        var value = new Array();
        for(var i = 0; i < size.length; i++ ){
            if(size[i].checked)
            value.push(size[i].value);
        } 
        var information = {};
        information.title = title;
        information.img = img;
        information.size = value;
        information.price = price;
        information.picture1 = picture1;  
        information.picture2 = picture2;
        information.picture3 = picture3;
        information.picture4 = picture4;
        var xhr = new XMLHttpRequest();
        xhr.open('post', "http://localhost:3000/goods" , true); 
        xhr.setRequestHeader('Content-type','application/json');
        var data = JSON.stringify(information);
        xhr.send(data);
        xhr.onload = function(){
            window.location = "manage.html";
        }
}
    </script>
</body>
</html>